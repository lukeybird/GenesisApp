<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <title>Sum√©rgete: Rut Conoce a Booz - L√≠nea de Tiempo de Rut</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: #0a0e27;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(0, 195, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 0, 150, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(0, 255, 200, 0.05) 0%, transparent 50%);
            color: #e0e0e0;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, rgba(0, 195, 255, 0.3), transparent),
                radial-gradient(2px 2px at 60% 70%, rgba(255, 0, 150, 0.3), transparent),
                radial-gradient(1px 1px at 50% 50%, rgba(0, 255, 200, 0.3), transparent),
                radial-gradient(1px 1px at 80% 10%, rgba(0, 195, 255, 0.2), transparent);
            background-size: 200% 200%;
            animation: particleMove 20s ease infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes particleMove {
            0%, 100% { background-position: 0% 0%, 100% 100%, 50% 50%, 80% 20%; }
            50% { background-position: 100% 100%, 0% 0%, 50% 50%, 20% 80%; }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .nav-menu {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-btn {
            padding: 12px 30px;
            background: rgba(0, 195, 255, 0.2);
            border: 1px solid rgba(0, 195, 255, 0.5);
            color: #00c3ff;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9em;
            font-weight: 600;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 150px;
            justify-content: space-between;
        }

        .dropdown-btn .emoji {
            display: none;
        }

        .dropdown-btn .text {
            display: inline;
        }

        .dropdown-btn:hover {
            background: rgba(0, 195, 255, 0.3);
            border-color: rgba(0, 195, 255, 0.8);
            box-shadow: 0 0 20px rgba(0, 195, 255, 0.4);
            transform: translateY(-2px);
        }

        .dropdown-btn.active {
            background: rgba(0, 195, 255, 0.4);
            border-color: rgba(0, 195, 255, 0.8);
            box-shadow: 0 0 25px rgba(0, 195, 255, 0.5);
        }

        .dropdown-btn::after {
            content: '‚ñº';
            font-size: 0.7em;
            transition: transform 0.3s ease;
        }

        .dropdown-btn.open::after {
            transform: rotate(180deg);
        }

        .dropdown-menu {
            position: absolute;
            top: calc(100% + 10px);
            left: 0;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 195, 255, 0.5);
            border-radius: 15px;
            min-width: 200px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.5),
                0 0 40px rgba(0, 195, 255, 0.2);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            overflow: hidden;
        }

        .dropdown-menu.open {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            padding: 12px 20px;
            color: #88d0ff;
            cursor: pointer;
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.95em;
            font-weight: 500;
            letter-spacing: 0.5px;
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(0, 195, 255, 0.1);
            display: block;
            text-decoration: none;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: rgba(0, 195, 255, 0.2);
            color: #00c3ff;
            padding-left: 25px;
        }

        .dropdown-item.active {
            background: rgba(0, 195, 255, 0.3);
            color: #00c3ff;
            border-left: 3px solid rgba(0, 195, 255, 0.8);
        }
        .dropdown-item.category-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }

        .dropdown-item.category-item .arrow {
            font-size: 0.7em;
            transition: transform 0.2s ease;
            margin-left: auto;
        }

        .dropdown-item.category-item:hover .arrow {
            transform: translateX(3px);
        }

        .submenu {
            background: rgba(5, 10, 25, 0.95);
            border-left: 3px solid rgba(0, 195, 255, 0.5);
            margin-left: 10px;
            border-radius: 0 0 10px 10px;
            overflow: hidden;
        }

        .submenu-item {
            padding-left: 35px !important;
            font-size: 0.9em;
        }

        .submenu-item:hover {
            padding-left: 40px !important;
        }


        header {
            background: rgba(10, 14, 39, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 195, 255, 0.3);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                0 0 40px rgba(0, 195, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            margin-bottom: 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 195, 255, 0.1), transparent);
            animation: scan 3s infinite;
        }

        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            color: #00c3ff;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 900;
            text-shadow: 
                0 0 20px rgba(0, 195, 255, 0.5),
                0 0 40px rgba(0, 195, 255, 0.3);
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        .subtitle {
            color: #88d0ff;
            font-size: 1.1em;
            font-weight: 300;
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
        }

        .content-section {
            background: rgba(10, 14, 39, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 195, 255, 0.3);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                0 0 40px rgba(0, 195, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            color: #00c3ff;
            font-size: 1.8em;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 0 0 15px rgba(0, 195, 255, 0.4);
            letter-spacing: 1px;
            border-bottom: 2px solid rgba(0, 195, 255, 0.3);
            padding-bottom: 10px;
        }

        .content-section p {
            color: #d0e0f0;
            line-height: 1.9;
            font-size: 1.1em;
            font-weight: 300;
            margin-bottom: 20px;
        }

        .verse-callout {
            background: rgba(0, 195, 255, 0.1);
            border-left: 4px solid rgba(0, 195, 255, 0.6);
            padding: 20px;
            margin: 25px 0;
            border-radius: 10px;
            font-style: italic;
            color: #c0d0e0;
            line-height: 1.8;
            position: relative;
        }

        .verse-callout::before {
            content: '"';
            font-size: 4em;
            color: rgba(0, 195, 255, 0.2);
            position: absolute;
            top: -10px;
            left: 15px;
            font-family: serif;
        }

        .verse-reference {
            display: block;
            margin-top: 15px;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9em;
            color: #88d0ff;
            font-style: normal;
            font-weight: 600;
        }

        .scripture-link {
            color: #88d0ff;
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px solid transparent;
        }

        .scripture-link:hover {
            color: #00c3ff;
            opacity: 1;
            border-bottom: 1px solid #00c3ff;
            text-shadow: 0 0 10px rgba(0, 195, 255, 0.5);
        }

        .theme-box {
            background: rgba(0, 195, 255, 0.05);
            border: 1px solid rgba(0, 195, 255, 0.2);
            padding: 25px;
            margin: 25px 0;
            border-radius: 15px;
        }

        .theme-title {
            font-family: 'Orbitron', sans-serif;
            color: #00c3ff;
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .additional-references {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid rgba(0, 195, 255, 0.2);
        }

        .additional-references-title {
            font-family: 'Orbitron', sans-serif;
            color: #00c3ff;
            font-size: 1.1em;
            margin-bottom: 15px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .reference-item {
            margin-bottom: 12px;
            padding-left: 15px;
            border-left: 2px solid rgba(0, 195, 255, 0.3);
            padding-bottom: 8px;
        }

        .reference-item:last-child {
            margin-bottom: 0;
        }

        .reference-item .ref-link {
            color: #88d0ff;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .reference-item .ref-link:hover {
            color: #00c3ff;
            text-shadow: 0 0 10px rgba(0, 195, 255, 0.5);
        }

        .reference-item .ref-explanation {
            color: #b0c0d0;
            font-size: 0.95em;
            margin-top: 3px;
            font-style: italic;
        }

        .audio-btn {
            margin-top: 25px;
            padding: 12px 30px;
            background: rgba(0, 195, 255, 0.2);
            border: 1px solid rgba(0, 195, 255, 0.5);
            color: #00c3ff;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9em;
            font-weight: 600;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .audio-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 195, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .audio-btn:hover {
            background: rgba(0, 195, 255, 0.3);
            border-color: rgba(0, 195, 255, 0.8);
            box-shadow: 
                0 0 20px rgba(0, 195, 255, 0.4),
                inset 0 0 20px rgba(0, 195, 255, 0.1);
            transform: translateY(-2px);
        }

        .audio-btn:hover::before {
            left: 100%;
        }

        .audio-btn.playing {
            background: rgba(0, 255, 150, 0.3);
            border-color: rgba(0, 255, 150, 0.8);
            box-shadow: 
                0 0 25px rgba(0, 255, 150, 0.5),
                inset 0 0 25px rgba(0, 255, 150, 0.2);
        }

        .audio-btn.playing::after {
            content: ' üîä';
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .content-section {
                padding: 25px;
            }

            .section-title {
                font-size: 1.4em;
            }

            .nav-menu {
                flex-direction: row;
                align-items: center;
                justify-content: center;
                gap: 20px;
            }

            .dropdown-btn {
                padding: 10px 15px;
                min-width: auto;
                width: 70px;
                height: 70px;
                justify-content: center;
                border-radius: 18px;
            }

            .dropdown-btn .text {
                display: none;
            }

            .dropdown-btn .emoji {
                display: inline;
                font-size: 1.5em;
            }

            .dropdown-btn::after {
                display: none;
            }

            .dropdown-menu {
                left: 50%;
                transform: translateX(-50%) translateY(-10px);
                min-width: 180px;
            }

            .dropdown-menu.open {
                transform: translateX(-50%) translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-menu"></div>

        <header>
            <h1>üåä Sum√©rgete: Rut Conoce a Booz</h1>
            <p class="subtitle">Bondad en los Campos, Redenci√≥n a la Vista</p>
        </header>

        <div class="content-section">
            <h2 class="section-title">Providencia en los Campos</h2>
            <p>En <a href="https://www.biblegateway.com/passage/?search=Rut%202%3A1-23&version=RVR1960" target="_blank" rel="noopener noreferrer" class="scripture-link">Ruth 2:1-23</a>, vemos la providencia de Dios obrando en las circunstancias m√°s ordinarias. Rut va a espigar en los campos, "casualmente" eligiendo el campo de Booz, quien es pariente del difunto esposo de Noem√≠. Este encuentro prepara el escenario para que Booz act√∫e como pariente-redentor, apuntando hacia Cristo, nuestro Redentor supremo.</p>
            
            <div class="verse-callout">
                Entonces Booz dijo a Rut: "Oye, hija m√≠a, no vayas a espigar a otro campo, ni pases de aqu√≠; y aqu√≠ estar√°s junto a mis criadas. Mira el campo que sieguen, y s√≠guelas; porque yo he mandado a los criados que no te molesten. Y cuando tengas sed, ve a los vasos, y bebe del agua que sacan los criados." Ella entonces se inclin√≥, y ech√≥ su rostro en tierra, y le dijo: "¬øPor qu√© he hallado gracia en tus ojos para que me reconozcas, siendo yo extranjera?" Y Booz respondi√≥ y le dijo: "Se me ha dicho todo lo que has hecho con tu suegra despu√©s de la muerte de tu marido; y que dejando a tu padre y a tu madre y la tierra de tu nacimiento, has venido a un pueblo que no conociste antes. El Se√±or recompense tu obra, y tu remuneraci√≥n sea cumplida de parte del Se√±or Dios de Israel, bajo cuyas alas has venido a refugiarte."
                <span class="verse-reference">
                    <a href="https://www.biblegateway.com/passage/?search=Ruth%202%3A8-12&version=RVR1960" target="_blank" rel="noopener noreferrer" class="scripture-link">Rut 2:8-12</a>
                </span>
            </div>

            <p>La bondad de Booz hacia Rut es extraordinaria. √âl la protege, la provee y le muestra favor m√°s all√° de lo que la ley requer√≠a. Sus palabras "bajo cuyas alas has venido a refugiarte" apuntan hacia c√≥mo encontramos refugio en Cristo. El car√°cter de Booz como redentor ya es evidente en este primer encuentro: demuestra la protecci√≥n, provisi√≥n y cuidado que un verdadero redentor muestra.</p>
            
            <div class="additional-references">
                <div class="additional-references-title">Referencias Adicionales</div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=Psalm%2091%3A4&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">Psalm 91:4</a>
                    <div class="ref-explanation">"He shall cover you with His feathers, and under His wings you shall take refuge," showing that God provides refuge, just as Boaz provided refuge for Ruth.</div>
                </div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=Matthew%2023%3A37&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">Matthew 23:37</a>
                    <div class="ref-explanation">"How often I wanted to gather your children together, as a hen gathers her chicks under her wings," showing Christ's desire to protect and care for us, just as Boaz protected and cared for Ruth.</div>
                </div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=Galatians%204%3A4-5&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">Galatians 4:4-5</a>
                    <div class="ref-explanation">"But when the fullness of the time had come, God sent forth His Son... to redeem those who were under the law," showing that Christ, like Boaz, acts as our Redeemer.</div>
                </div>
            </div>
            <button class="audio-btn" data-section="providence">Escuchar Secci√≥n</button>
        </div>

        <div class="content-section">
            <h2 class="section-title">El Car√°cter de un Redentor</h2>
            <p>Boaz's kindness to Ruth demonstrates the character of a true redeemer. His protection, provision, and care for Ruth point forward to how Christ, our ultimate Kinsman-Redeemer, protects, provides for, and cares for us. Boaz's role as a guardian-redeemer foreshadows Christ's work of redemption.</p>

            <div class="theme-box">
                <div class="theme-title">Cristo Nuestro Protector y Proveedor</div>
                <p>As√≠ como Booz protegi√≥ a Rut del da√±o, provey√≥ para sus necesidades y le mostr√≥ bondad extraordinaria, Cristo nos protege, nos provee y nos muestra Su gracia. El cuidado de Booz por Rut demuestra el coraz√≥n de un verdadero redentor: uno que se preocupa por el bienestar de otros, especialmente aquellos que son vulnerables y necesitados.</p>
                <div class="verse-reference" style="margin-top: 15px;">
                    <a href="https://www.biblegateway.com/passage/?search=Philippians%204%3A19&version=NKJV" target="_blank" rel="noopener noreferrer" class="scripture-link">Philippians 4:19</a>
                </div>
            </div>

            <div class="verse-callout">
                And my God shall supply all your need according to His riches in glory by Christ Jesus.
                <span class="verse-reference">
                    <a href="https://www.biblegateway.com/passage/?search=Philippians%204%3A19&version=NKJV" target="_blank" rel="noopener noreferrer" class="scripture-link">Philippians 4:19</a>
                </span>
            </div>
            
            <p>Just as Boaz provided for Ruth's physical needs, Christ provides for all our needs‚Äîspiritual and physical. Boaz's protection of Ruth points to how Christ protects us from the enemy. Boaz's kindness to a foreigner demonstrates God's heart for all people, regardless of their background, pointing forward to how Christ came to save all who believe.</p>
            
            <div class="additional-references">
                <div class="additional-references-title">Referencias Adicionales</div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=Galatians%204%3A4-5&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">Galatians 4:4-5</a>
                    <div class="ref-explanation">"But when the fullness of the time had come, God sent forth His Son... to redeem those who were under the law," showing that Christ, like Boaz, acts as our Redeemer.</div>
                </div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=1%20Peter%205%3A7&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">1 Peter 5:7</a>
                    <div class="ref-explanation">"Casting all your care upon Him, for He cares for you," showing that Christ cares for us, just as Boaz cared for Ruth.</div>
                </div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=John%2010%3A28-29&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">John 10:28-29</a>
                    <div class="ref-explanation">"And I give them eternal life, and they shall never perish; neither shall anyone snatch them out of My hand," showing that Christ protects us, just as Boaz protected Ruth.</div>
                </div>
            </div>
            <button class="audio-btn" data-section="character">Escuchar Secci√≥n</button>
        </div>

        <div class="content-section">
            <h2 class="section-title">Conclusi√≥n: Bondad Que Apunta a Cristo</h2>
            <p>Boaz's kindness to Ruth in the fields demonstrates the character of a true redeemer. His protection, provision, and care for Ruth point forward to how Christ, our ultimate Kinsman-Redeemer, protects, provides for, and cares for us. This encounter sets the stage for the ultimate act of redemption that follows.</p>

            <p>Just as Boaz showed extraordinary kindness to Ruth, a foreigner and a widow, Christ shows extraordinary grace to us. Boaz's words "under whose wings you have come to take refuge" point to how we find refuge in Christ. This first encounter between Ruth and Boaz reveals the heart of a redeemer‚Äîone who protects, provides, and cares for those in need, pointing forward to our ultimate Redeemer, Jesus Christ.</p>
            
            <div class="additional-references">
                <div class="additional-references-title">Referencias Adicionales</div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=Galatians%204%3A4-5&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">Galatians 4:4-5</a>
                    <div class="ref-explanation">"But when the fullness of the time had come, God sent forth His Son... to redeem those who were under the law," showing that Christ, like Boaz, acts as our Redeemer.</div>
                </div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=Psalm%2091%3A4&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">Psalm 91:4</a>
                    <div class="ref-explanation">"He shall cover you with His feathers, and under His wings you shall take refuge," showing that God provides refuge, just as Boaz provided refuge for Ruth.</div>
                </div>
                <div class="reference-item">
                    <a href="https://www.biblegateway.com/passage/?search=Matthew%2023%3A37&version=NKJV" target="_blank" rel="noopener noreferrer" class="ref-link">Matthew 23:37</a>
                    <div class="ref-explanation">"How often I wanted to gather your children together, as a hen gathers her chicks under her wings," showing Christ's desire to protect and care for us, just as Boaz protected and cared for Ruth.</div>
                </div>
            </div>
            <button class="audio-btn" data-section="conclusion">Escuchar Secci√≥n</button>
        </div>
    </div>

    <script>
        // Speech Synthesis Setup
        let currentUtterance = null;
        let currentButton = null;
        let spanishVoice = null;

        // Find Jarvis-like voice
        function findSpanishVoice() {
            const voices = speechSynthesis.getVoices();
            const preferredVoices = [
                'Google espa√±ol',
                'Microsoft Sabina - Spanish (Mexico)',
                'Microsoft Pablo - Spanish (Spain)',
                'Microsoft Helena - Spanish (Spain)',
                'Microsoft Laura - Spanish (Spain)'
            ];
            
            for (const preferred of preferredVoices) {
                const voice = voices.find(v => v.name.includes(preferred));
                if (voice) return voice;
            }
            
            return voices.find(v => v.name.toLowerCase().includes('male')) || voices[0];
        }

        // Load voices
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = () => {
                spanishVoice = findSpanishVoice();
            };
        }
        
        setTimeout(() => {
            spanishVoice = findSpanishVoice();
        }, 100);

        // Get text content from a section
        function getSectionText(section) {
            const sectionElement = section.closest('.content-section');
            if (!sectionElement) return '';
            
            const clone = sectionElement.cloneNode(true);
            clone.querySelectorAll('.audio-btn').forEach(el => el.remove());
            return clone.textContent.trim();
        }

        // Play audio function
        function playAudio(button, text) {
            if (button === currentButton && button.classList.contains('playing')) {
                speechSynthesis.cancel();
                button.classList.remove('playing');
                button.textContent = 'Listen to Section';
                currentUtterance = null;
                currentButton = null;
                return;
            }

            if (currentUtterance && currentButton) {
                speechSynthesis.cancel();
                document.querySelectorAll('.audio-btn').forEach(btn => {
                    btn.classList.remove('playing');
                    btn.textContent = 'Listen to Section';
                });
            }

            currentUtterance = new SpeechSynthesisUtterance(text);
            
            if (spanishVoice) {
                currentUtterance.voice = spanishVoice;
            }
            currentUtterance.rate = 0.9;
            currentUtterance.pitch = 0.85;
            currentUtterance.volume = 1;
            currentUtterance.lang = 'es-ES';

            document.querySelectorAll('.audio-btn').forEach(btn => {
                btn.classList.remove('playing');
                btn.textContent = 'Listen to Section';
            });
            
            button.classList.add('playing');
            button.textContent = 'Playing...';
            currentButton = button;

            currentUtterance.onend = () => {
                button.classList.remove('playing');
                button.textContent = 'Listen to Section';
                currentUtterance = null;
                currentButton = null;
            };

            currentUtterance.onerror = () => {
                button.classList.remove('playing');
                button.textContent = 'Listen to Section';
                currentUtterance = null;
                currentButton = null;
            };

            speechSynthesis.speak(currentUtterance);
        }

        // Initialize audio buttons
        document.addEventListener('DOMContentLoaded', function() {
            const audioButtons = document.querySelectorAll('.audio-btn');
            
            audioButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const text = getSectionText(this);
                    if (text) {
                        playAudio(this, text);
                    }
                });
            });
        });
    </script>
    <script src="menu.js"></script>
</body>
</html>

